{% assign entries = include.entries | default: site[include.collection] %}
{% assign entries = entries | where_exp: "post", "post.hidden != true" %}

{% if include.category %}
  {% assign entries = entries | where_exp: "post", "post.categories contains include.category" %}
{% endif %}

{% if include.sort_by %}
  {% assign entries = entries | sort: include.sort_by %}
{% endif %}

{% if include.sort_order == 'reverse' %}
  {% assign entries = entries | reverse %}
{% endif %}

{%- for post in entries -%}
  {% include {{ include.included_archive_layout | default: "archive-single" }}.html type=include.type %}
{%- endfor -%}
